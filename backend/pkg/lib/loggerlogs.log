{"timestamp":"13:27:27.284","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"14:01:01.217","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"14:01:01.224","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"14:01:01.246","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"14:01:01.355","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"14:01:01.439","level":"ERROR","message":"Failed to run migrations ","data":{"error":{}}}
{"timestamp":"14:52:52.297","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"14:52:52.298","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"14:52:52.308","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"14:52:52.368","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"14:52:52.394","level":"ERROR","message":"Failed to run migrations ","data":{"error":{}}}
{"timestamp":"15:19:19.079","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"15:19:19.082","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"15:19:19.106","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"15:19:19.207","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"15:19:19.210","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: Dirty database version 1. Fix and force version."}}
{"timestamp":"12:39:39.718","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"12:39:39.722","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"12:39:39.777","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"12:40:40.077","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"12:40:40.083","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: Dirty database version 1. Fix and force version."}}
{"timestamp":"12:43:43.243","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"12:43:43.244","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"12:43:43.265","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"12:43:43.451","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"12:43:43.495","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: migration failed: CREATE INDEX CONCURRENTLY cannot run inside a transaction block in line 0: -- Migration: 001_create_orders_table.up.sql\r\n-- Создание основной таблицы заказов\r\n\r\nCREATE TABLE IF NOT EXISTS orders (\r\n    id SERIAL PRIMARY KEY,\r\n    order_uid VARCHAR(255) NOT NULL UNIQUE,\r\n    track_number VARCHAR(255) NOT NULL,\r\n    entry VARCHAR(10) NOT NULL,\r\n    locale VARCHAR(10) NOT NULL DEFAULT 'en',\r\n    internal_signature TEXT,\r\n    customer_id VARCHAR(255) NOT NULL,\r\n    delivery_service VARCHAR(100) NOT NULL,\r\n    shardkey VARCHAR(10) NOT NULL,\r\n    sm_id INTEGER NOT NULL,\r\n    date_created TIMESTAMP WITH TIME ZONE NOT NULL,\r\n    oof_shard VARCHAR(10) NOT NULL,\r\n    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,\r\n    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP\r\n);\r\n\r\n-- Индексы для оптимизации запросов\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_order_uid ON orders(order_uid);\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_track_number ON orders(track_number);\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_customer_id ON orders(customer_id);\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_date_created ON orders(date_created);\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_created_at ON orders(created_at);\r\nCREATE INDEX CONCURRENTLY IF NOT EXISTS idx_orders_shardkey ON orders(shardkey);\r\n\r\n-- Комментарии для документации\r\nCOMMENT ON TABLE orders IS 'Основная таблица заказов';\r\nCOMMENT ON COLUMN orders.order_uid IS 'Уникальный идентификатор заказа';\r\nCOMMENT ON COLUMN orders.track_number IS 'Номер для отслеживания';\r\nCOMMENT ON COLUMN orders.customer_id IS 'Идентификатор клиента';\r\nCOMMENT ON COLUMN orders.shardkey IS 'Ключ для шардирования';\r\nCOMMENT ON COLUMN orders.sm_id IS 'Идентификатор склада';\r\nCOMMENT ON COLUMN orders.oof_shard IS 'Шард для out-of-stock операций';\r\n (details: pq: CREATE INDEX CONCURRENTLY cannot run inside a transaction block)"}}
{"timestamp":"13:01:01.427","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"13:01:01.427","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"13:01:01.443","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"13:01:01.537","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"13:01:01.542","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: first .: file does not exist"}}
{"timestamp":"13:00:00.562","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"13:00:00.563","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"13:00:00.576","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"13:00:00.617","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"13:00:00.619","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: first .: file does not exist"}}
{"timestamp":"21:27:27.772","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"orders","Host":"postgres","Password":"postgres","Port":5432,"User":"postgres"},"Environment":"development","HTTPPort":8080,"Redis":{"Host":"redis","Port":6379}}}}
{"timestamp":"21:27:27.776","level":"INFO","message":"Attempting to connect to PostgreSQL ","data":{"database":"orders","host":"postgres","port":5432}}
{"timestamp":"21:27:27.792","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"21:27:27.875","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"21:27:27.879","level":"ERROR","message":"Failed to run migrations ","data":{"error":"failed to run migrations up: first .: file does not exist"}}
{"timestamp":"11:58:58.454","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"wildberries","Host":"postgres","Password":"password","Port":5432,"User":"user"},"Environment":"production","HTTPPort":8000,"Kafka":{"Brokers":["kafka:29092"],"GroupID":"wildberries-consumer","Topic":"orders"},"Redis":{"Host":"redis","MaxOrders":100,"Port":6379}}}}
{"timestamp":"11:58:58.539","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"11:58:58.707","level":"INFO","message":"Migrations applied successfully \n","data":{}}
{"timestamp":"11:58:58.711","level":"INFO","message":"Attempting to connect to Redis ","data":{"host":"redis","port":6379}}
{"timestamp":"11:58:58.714","level":"INFO","message":"Successfully connected to Redis \n","data":{}}
{"timestamp":"11:58:58.717","level":"INFO","message":"Attempting to connect to Postgres ","data":{"database":"wildberries","host":"postgres","port":5432}}
{"timestamp":"11:58:58.746","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"11:58:58.749","level":"INFO","message":"Current cache state ","data":{"cached_orders":0,"max_orders":100}}
{"timestamp":"11:58:58.766","level":"INFO","message":"No orders to load into cache \n","data":{}}
{"timestamp":"11:58:58.768","level":"INFO","message":"Application started successfully ","data":{"http_port":8000,"kafka_brokers":["kafka:29092"],"kafka_topic":"orders"}}
{"timestamp":"11:58:58.768","level":"INFO","message":"Starting Kafka consumer... \n","data":{}}
{"timestamp":"11:58:58.783","level":"INFO","message":"Запуск Kafka consumer для топика: orders \n","data":{}}
{"timestamp":"11:58:58.768","level":"INFO","message":"Starting HTTP server... ","data":{"port":8000}}
{"timestamp":"11:58:58.792","level":"INFO","message":"Starting HTTP server ","data":{"addr":":8000"}}
{"timestamp":"12:05:05.987","level":"INFO","message":"Shutting down application... \n","data":{}}
{"timestamp":"12:05:05.991","level":"INFO","message":"Stopping HTTP server \n","data":{}}
{"timestamp":"12:05:05.992","level":"INFO","message":"Ошибка чтения сообщения из Kafka: fetching message: context canceled \n","data":{}}
{"timestamp":"12:05:05.994","level":"INFO","message":"Остановка Kafka consumer \n","data":{}}
{"timestamp":"12:05:05.993","level":"INFO","message":"HTTP server stopped \n","data":{}}
{"timestamp":"12:06:06.543","level":"INFO","message":"Application shutdown completed \n","data":{}}
{"timestamp":"12:53:53.575","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"wildberries","Host":"postgres","Password":"password","Port":5432,"User":"user"},"Environment":"production","HTTPPort":8000,"Kafka":{"Brokers":["kafka:29092"],"GroupID":"wildberries-consumer","Topic":"orders"},"Redis":{"Host":"redis","MaxOrders":100,"Port":6379}}}}
{"timestamp":"12:53:53.607","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"12:53:53.619","level":"INFO","message":"No migrations to apply \n","data":{}}
{"timestamp":"12:53:53.623","level":"INFO","message":"Attempting to connect to Redis ","data":{"host":"redis","port":6379}}
{"timestamp":"12:53:53.632","level":"INFO","message":"Successfully connected to Redis \n","data":{}}
{"timestamp":"12:53:53.636","level":"INFO","message":"Attempting to connect to Postgres ","data":{"database":"wildberries","host":"postgres","port":5432}}
{"timestamp":"12:53:53.672","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"12:53:53.673","level":"INFO","message":"Current cache state ","data":{"cached_orders":0,"max_orders":100}}
{"timestamp":"12:53:53.704","level":"INFO","message":"No orders to load into cache \n","data":{}}
{"timestamp":"12:53:53.705","level":"INFO","message":"Application started successfully ","data":{"http_port":8000,"kafka_brokers":["kafka:29092"],"kafka_topic":"orders"}}
{"timestamp":"12:53:53.705","level":"INFO","message":"Starting Kafka consumer... \n","data":{}}
{"timestamp":"12:53:53.706","level":"INFO","message":"Запуск Kafka consumer для топика: orders \n","data":{}}
{"timestamp":"12:53:53.705","level":"INFO","message":"Starting HTTP server... ","data":{"port":8000}}
{"timestamp":"12:53:53.708","level":"INFO","message":"Starting HTTP server ","data":{"addr":":8000"}}
{"timestamp":"12:58:58.847","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":5001,"method":"GET","status":404}}
{"timestamp":"12:58:58.942","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":8101,"method":"GET","status":404}}
{"timestamp":"12:01:01.647","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":33503,"method":"GET","status":200}}
{"timestamp":"12:01:01.721","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":4901,"method":"GET","status":404}}
{"timestamp":"13:54:54.263","level":"INFO","message":"Shutting down application... \n","data":{}}
{"timestamp":"13:54:54.272","level":"INFO","message":"Stopping HTTP server \n","data":{}}
{"timestamp":"13:54:54.273","level":"INFO","message":"Ошибка чтения сообщения из Kafka: fetching message: context canceled \n","data":{}}
{"timestamp":"13:54:54.284","level":"INFO","message":"Остановка Kafka consumer \n","data":{}}
{"timestamp":"13:54:54.284","level":"INFO","message":"HTTP server stopped \n","data":{}}
{"timestamp":"13:54:54.563","level":"INFO","message":"Application shutdown completed \n","data":{}}
{"timestamp":"13:15:15.156","level":"INFO","message":"Starting application with configuration ","data":{"config":{"DB":{"Db":"wildberries","Host":"postgres","Password":"password","Port":5432,"User":"user"},"Environment":"production","HTTPPort":8000,"Kafka":{"Brokers":["kafka:29092"],"GroupID":"wildberries-consumer","Topic":"orders"},"Redis":{"Host":"redis","MaxOrders":100,"Port":6379}}}}
{"timestamp":"13:15:15.562","level":"INFO","message":"Running migrations up... \n","data":{}}
{"timestamp":"13:15:15.573","level":"INFO","message":"No migrations to apply \n","data":{}}
{"timestamp":"13:15:15.576","level":"INFO","message":"Attempting to connect to Redis ","data":{"host":"redis","port":6379}}
{"timestamp":"13:15:15.583","level":"INFO","message":"Successfully connected to Redis \n","data":{}}
{"timestamp":"13:15:15.586","level":"INFO","message":"Attempting to connect to Postgres ","data":{"database":"wildberries","host":"postgres","port":5432}}
{"timestamp":"13:15:15.602","level":"INFO","message":"Successfully connected to PostgreSQL database \n","data":{}}
{"timestamp":"13:15:15.607","level":"INFO","message":"Current cache state ","data":{"cached_orders":0,"max_orders":100}}
{"timestamp":"13:15:15.673","level":"INFO","message":"No orders to load into cache \n","data":{}}
{"timestamp":"13:15:15.679","level":"INFO","message":"Application started successfully ","data":{"http_port":8000,"kafka_brokers":["kafka:29092"],"kafka_topic":"orders"}}
{"timestamp":"13:15:15.679","level":"INFO","message":"Starting HTTP server... ","data":{"port":8000}}
{"timestamp":"13:15:15.693","level":"INFO","message":"Starting HTTP server ","data":{"addr":":8000"}}
{"timestamp":"13:15:15.679","level":"INFO","message":"Starting Kafka consumer... \n","data":{}}
{"timestamp":"13:15:15.714","level":"INFO","message":"Запуск Kafka consumer для топика: orders \n","data":{}}
{"timestamp":"13:50:50.780","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":66505,"method":"GET","status":200}}
{"timestamp":"13:50:50.938","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":4501,"method":"GET","status":404}}
{"timestamp":"13:06:06.646","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":5801,"method":"OPTIONS","status":204}}
{"timestamp":"13:06:06.716","level":"INFO","message":"HTTP Request ","data":{"client_ip":"172.18.0.1","latency":3501,"method":"GET","status":404}}
{"timestamp":"13:27:27.274","level":"INFO","message":"Shutting down application... \n","data":{}}
{"timestamp":"13:27:27.278","level":"INFO","message":"Stopping HTTP server \n","data":{}}
{"timestamp":"13:27:27.290","level":"INFO","message":"HTTP server stopped \n","data":{}}
{"timestamp":"13:27:27.278","level":"INFO","message":"Ошибка чтения сообщения из Kafka: fetching message: context canceled \n","data":{}}
{"timestamp":"13:27:27.292","level":"INFO","message":"Остановка Kafka consumer \n","data":{}}
{"timestamp":"13:27:27.602","level":"INFO","message":"Application shutdown completed \n","data":{}}
